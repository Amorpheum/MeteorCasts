{"metadata":{"usedHelpers":["interopRequireDefault"],"marked":[],"modules":{"imports":[{"source":"meteor/meteor","imported":["Meteor"],"specifiers":[{"kind":"named","imported":"Meteor","local":"Meteor"}]},{"source":"../imports/collections/links","imported":["Links"],"specifiers":[{"kind":"named","imported":"Links","local":"Links"}]},{"source":"meteor/webapp","imported":["WebApp"],"specifiers":[{"kind":"named","imported":"WebApp","local":"WebApp"}]},{"source":"connect-route","imported":["default"],"specifiers":[{"kind":"named","imported":"default","local":"ConnectRoute"}]}],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/server/main.js","filenameRelative":"/server/main.js","env":{},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/server/main.js.map","sourceFileName":"/server/main.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"basename":"main"},"ignored":false,"code":"var _meteor = require('meteor/meteor');\n\nvar _links = require('../imports/collections/links');\n\nvar _webapp = require('meteor/webapp');\n\nvar _connectRoute = require('connect-route');\n\nvar _connectRoute2 = _interopRequireDefault(_connectRoute);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\n_meteor.Meteor.startup(function () {\n  _meteor.Meteor.publish('links', function () {\n    return _links.Links.find({});\n  });\n});\n\n// Executed whenever a user visits with a route like\n// 'localhost:3000/abcd'\nfunction onRoute(req, res, next) {\n  // Take the token out of hte url and try to a find a\n  // matching link in the Links collection\n  var link = _links.Links.findOne({ token: req.params.token });\n\n  if (link) {\n    // If we find a link object, redirect the user to the\n    // long URL\n\n  } else {\n      // If we don't find a link object, send the user\n      // to our normal React app\n\n    }\n}\n\nvar middleware = (0, _connectRoute2['default'])(function (router) {\n  router.get('/:token', onRoute);\n});\n\n_webapp.WebApp.connectHandlers.use(middleware);","ast":null,"map":{"version":3,"sources":["/server/main.js"],"names":[],"mappings":"AAAA;;AACA;;AACA;;AACA;;;;;;AAEA,eAAO,OAAP,CAAe,YAAM;AACnB,iBAAO,OAAP,CAAe,OAAf,EAAwB,YAAW;AACjC,WAAO,aAAM,IAAN,CAAW,EAAX,CAAP,CADiC;GAAX,CAAxB,CADmB;CAAN,CAAf;;;;AAQA,SAAS,OAAT,CAAiB,GAAjB,EAAsB,GAAtB,EAA2B,IAA3B,EAAiC;;;AAG/B,MAAM,OAAO,aAAM,OAAN,CAAc,EAAE,OAAO,IAAI,MAAJ,CAAW,KAAX,EAAvB,CAAP,CAHyB;;AAK/B,MAAI,IAAJ,EAAU;;;;GAAV,MAIO;;;;KAJP;CALF;;AAgBA,IAAM,aAAa,+BAAa,UAAS,MAAT,EAAiB;AAC/C,SAAO,GAAP,CAAW,SAAX,EAAsB,OAAtB,EAD+C;CAAjB,CAA1B;;AAIN,eAAO,eAAP,CAAuB,GAAvB,CAA2B,UAA3B","file":"/server/main.js.map","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Links } from '../imports/collections/links';\nimport { WebApp } from 'meteor/webapp';\nimport ConnectRoute from 'connect-route';\n\nMeteor.startup(() => {\n  Meteor.publish('links', function() {\n    return Links.find({});\n  });\n});\n\n// Executed whenever a user visits with a route like\n// 'localhost:3000/abcd'\nfunction onRoute(req, res, next) {\n  // Take the token out of hte url and try to a find a\n  // matching link in the Links collection\n  const link = Links.findOne({ token: req.params.token });\n\n  if (link) {\n    // If we find a link object, redirect the user to the\n    // long URL\n\n  } else {\n    // If we don't find a link object, send the user\n    // to our normal React app\n\n  }\n}\n\nconst middleware = ConnectRoute(function(router) {\n  router.get('/:token', onRoute);\n});\n\nWebApp.connectHandlers.use(middleware);\n"]},"hash":"07f837afc9ce38fa9b04b9ddfd222c3832ce9cbd"}
